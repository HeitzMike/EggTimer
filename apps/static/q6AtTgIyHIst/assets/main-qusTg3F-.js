(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const r of t.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function i(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(n){if(n.ep)return;n.ep=!0;const t=i(n);fetch(n.href,t)}})();console.log(typeof PluginMessageHandler<"u"?"Running as R1 Creation":"Running in browser mode");const a=[{name:"Soft",time:360,color:"#FFE66D"},{name:"Medium-Soft",time:480,color:"#FFD93D"},{name:"Medium-Hard",time:600,color:"#FFBB00"},{name:"Hard",time:720,color:"#FF9500"}];let g=0,l=0,p=!1,T=null,m=null;function v(e,o,i){const s=e.canvas,n=s.width,t=s.height;e.clearRect(0,0,n,t);const r=[["........","..1111..",".111111.",".111111.",".111221.",".112221.","..1111..","........"],["........","..1111..",".111111.",".111111.",".111221.",".111221.","..1111..","........"],["........","..1111..",".111111.",".111111.",".111111.",".111111.","..1111..","........"],["........","..1111..",".111111.",".111111.",".111111.",".111111.","..1111..","........"]],c=[{1:"#FFF9E6",2:"#FFD700"},{1:"#FFF4D1",2:"#FFC700"},{1:"#FFEFB8",2:"#FFB700"},{1:"#FFE89F",2:"#FFA500"}],d=r[o],S=c[o],u=n/8;for(let F=0;F<8;F++)for(let h=0;h<8;h++){const E=d[F][h];E!=="."&&(e.fillStyle=S[E],e.fillRect(h*u,F*u,u,u))}i>.1&&C(e,n,t),p&&M(e,n,t)}function C(e,o,i,s){const t=Date.now()/200;e.fillStyle="rgba(255, 255, 255, 0.3)";for(let r=0;r<3;r++){const c=o/2+Math.sin(t+r)*5,d=i*.1-t%20+r*8;d>-10&&d<i*.3&&(e.beginPath(),e.arc(c,d,2,0,Math.PI*2),e.fill())}}function M(e,o,i){const s=Date.now()/300,n=5;e.fillStyle="rgba(135, 206, 235, 0.4)";for(let t=0;t<n;t++){const r=o*.2+t*o*.15+Math.sin(s+t)*3,c=i*.9-(s*10+t*15)%(i*.5),d=1+Math.sin(s+t)*.5;c>i*.4&&c<i&&(e.beginPath(),e.arc(r,c,d,0,Math.PI*2),e.fill())}}function P(){m||(m=new(window.AudioContext||window.webkitAudioContext))}function f(e=800,o=200){P();const i=m.createOscillator(),s=m.createGain();i.connect(s),s.connect(m.destination),i.frequency.value=e,i.type="sine",s.gain.setValueAtTime(.3,m.currentTime),s.gain.exponentialRampToValueAtTime(.01,m.currentTime+o/1e3),i.start(m.currentTime),i.stop(m.currentTime+o/1e3)}function B(){f(800,150),setTimeout(()=>f(1e3,150),150),setTimeout(()=>f(1200,300),300)}function L(){f(1e3,150),setTimeout(()=>f(800,150),150),setTimeout(()=>f(1e3,150),300),setTimeout(()=>f(1200,400),450)}function A(){p||(p=!0,g=0,l=0,w(),T=setInterval(()=>{l++;for(let e=0;e<a.length;e++)if(l===a[e].time){g=e,B(),y(`${a[e].name} boiled!`),e===a.length-1&&typeof PluginMessageHandler<"u"&&PluginMessageHandler.postMessage(JSON.stringify({message:"Your eggs are ready! Hard boiled stage complete.",wantsR1Response:!0}));break}if(l>=a[a.length-1].time){b(),L(),y("Timer complete!");return}w()},1e3),y("Timer running..."))}function b(){p=!1,T&&(clearInterval(T),T=null),y("Timer stopped")}function D(){b(),l=0,g=0,w(),y("Press side button to start")}function w(){const o=document.getElementById("eggCanvas").getContext("2d"),i=document.getElementById("stageName"),s=document.getElementById("stageTime"),n=document.getElementById("progressBar");let t=0;for(let u=0;u<a.length;u++)l>=a[u].time&&(t=u);g=t;const r=a[a.length-1].time,c=Math.min(l/r,1);v(o,g,c),l===0?i.textContent="Ready":l<a[0].time?i.textContent="Cooking...":i.textContent=a[g].name;const d=Math.floor(l/60),S=l%60;s.textContent=`${String(d).padStart(2,"0")}:${String(S).padStart(2,"0")}`,n.style.width=`${c*100}%`}function y(e){const o=document.getElementById("status");o.textContent=e}window.addEventListener("sideClick",()=>{console.log("Side button clicked"),p?b():l===0?A():D()});window.addEventListener("scrollUp",()=>{console.log("Scroll up detected")});window.addEventListener("scrollDown",()=>{console.log("Scroll down detected")});document.addEventListener("DOMContentLoaded",()=>{console.log("Egg Timer initialized!"),w(),typeof PluginMessageHandler>"u"&&window.addEventListener("keydown",o=>{o.code==="Space"&&(o.preventDefault(),window.dispatchEvent(new CustomEvent("sideClick")))});function e(){(p||l>0)&&w(),requestAnimationFrame(e)}e()});console.log("Egg Timer Ready!");console.log("Press side button to start timing your eggs");
